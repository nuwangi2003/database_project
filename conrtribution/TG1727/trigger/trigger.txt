					-- Ca Marks Trigger
DELIMITER $$

					-- BEFORE INSERT
CREATE TRIGGER trg_ca_marks_before_insert
BEFORE INSERT ON marks
FOR EACH ROW
BEGIN
    DECLARE a DOUBLE;
    DECLARE b DOUBLE;
    DECLARE c DOUBLE;
    DECLARE best_two_sum DOUBLE;

    SET a = IFNULL(NEW.quiz1_marks,0);
    SET b = IFNULL(NEW.quiz2_marks,0);
    SET c = IFNULL(NEW.quiz3_marks,0);

    SET best_two_sum = a + b + c - LEAST(a,b,c); -- sum of best two
    SET NEW.ca_marks = ROUND((best_two_sum / 2 * 0.10)
                        + IFNULL(NEW.assessment_marks,0)*0.15
                        + IFNULL(NEW.mid_marks,0)*0.15,2);
END$$